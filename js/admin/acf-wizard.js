!function(){var t;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function r(t,e,a){return(e=n(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t){var a=function(t,a){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(a)?a:String(a)}function i(t,e){return s(t,o(t,e,"get"))}function o(t,e,a){if(!e.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return e.get(t)}function c(t,e,a){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),function(t,e){if(void 0===t)throw new TypeError("attempted to get private static field before its declaration")}(a),s(t,a)}function s(t,e){return e.get?e.get.call(t):e.value}var u=new WeakMap,d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,a){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,a)}(this,u,{writable:!0,value:void 0}),r(this,"parent",void 0),r(this,"stepper",void 0),r(this,"steps",[]);var a,n,i,s=c(t,t,l).length;this.parent=e,this.stepper=document.createElement("div"),this.parent.setAttribute("data-wizard-container",s),this.stepper.classList.add("acf-wizard-stepper"),this.parent.prepend(this.stepper),a=this,n=u,i=new MutationObserver((function(t,e){t.forEach((function(t){var e=t.target.getAttribute("data-key"),a=t.target.matches(".acf-hidden");document.querySelectorAll('[data-wizard-action="goto"][data-wizard-target="'.concat(e,'"]')).forEach((function(t){t.disabled=a}))}))})),function(t,e,a){if(e.set)e.set.call(t,a);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=a}}(a,o(a,n,"set"),i),c(t,t,l)[s]=this}var e,n,s;return e=t,s=[{key:"factory",value:function(e){var a=Object.values(c(t,t,l)).find((function(t){return e===t.parent}));return void 0===a&&(a=new t(e)),a}},{key:"findByElement",value:function(e){var a=parseInt(e.closest("[data-wizard-container]").getAttribute("data-wizard-container"));return c(t,t,l)[a]}},{key:"navigate",value:function(e){var a=t.findByElement(e),r=e.getAttribute("data-wizard-action");"goto"===r?a.goto(e.getAttribute("data-wizard-target")):"forward"===r?a.currentIndex+=parseInt(e.getAttribute("data-wizard-steps")):"back"===r&&(a.currentIndex-=parseInt(e.getAttribute("data-wizard-steps")))}}],(n=[{key:"current",get:function(){return this.parent.querySelectorAll(".acf-field-wizard-step").forEach((function(t){return idx=!!t.matches(".active")&&t})),!1}},{key:"currentNavItem",get:function(){var t=this,e=!1;try{this.parent.querySelectorAll(".acf-field-wizard-step").forEach((function(a){var r=t.stepper.querySelector('[data-wizard-target="'.concat(a.getAttribute("data-key"),'"]'));if(r&&(e=r),a.matches(".active"))throw""}))}catch(a){}return e}},{key:"currentIndex",get:function(){var t=-1;return this.parent.querySelectorAll(".acf-field-wizard-step").forEach((function(e,a){return t=e.matches(".active")?a:t})),t},set:function(t){var e=this;this.parent.querySelectorAll(".acf-field-wizard-step").forEach((function(a,r){t===r&&e.goto(a.getAttribute("data-key"))}))}},{key:"destructor",value:function(){i(this,u).disconnect()}},{key:"add",value:function(t){var e=t.getAttribute("data-wizard-nav");if("none"===e)return!1;var a=document.createElement("button"),r=t.getAttribute("data-key");return a.type="button",a.setAttribute("data-wizard-action","goto"),a.setAttribute("data-wizard-target",r),e.includes("name")&&(a.innerHTML='<span class="acf-wizard-nav-item-name">'.concat(t.querySelector(".acf-label").textContent,"</span>")),a.classList.add("acf-wizard-nav-item"),e.includes("number")&&a.classList.add("-numbered"),this.stepper.append(a),t.matches('.acf-field-wizard-step[data-conditions]:not([data-wizard-nav="none"])')&&i(this,u).observe(t,{attributes:!0}),this.currentIndex<0&&this.goto(r),this}},{key:"goto",value:function(t){this.parent.querySelector(':scope > [data-key="'.concat(t,'"]')).classList.add("active"),this.parent.querySelectorAll(':scope > .acf-field-wizard-step:not([data-key="'.concat(t,'"])')).forEach((function(t){t.classList.remove("active")}));var e=this.currentNavItem;if(e){var a=e.getAttribute("data-wizard-target");return e.classList.add("active"),this.stepper.querySelectorAll('[data-wizard-target]:not([data-wizard-target="'.concat(a,'"])')).forEach((function(t){t.classList.remove("active")})),this}}}])&&a(e.prototype,n),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}(),l={writable:!0,value:[]};document.addEventListener("click",(function(t){var e=t.target.closest("[data-wizard-action]");e&&d.navigate(e)}));var f;(f=t=d)&&f.__esModule;var p=acf.Field.extend({type:"wizard_step",initialize:function(){this.$el.hasClass("acf-wizard")}});acf.registerFieldType(p);var v,h=(v=t)&&v.__esModule?v:{default:v},y=acf.Field.extend({type:"wizard_step",initialize:function(){this.$el.hasClass("acf-wizard")||(this.$el.addClass("acf-wizard"),this.wizard=h.default.factory(this.$el.parent().get(0)),this.wizard.add(this.$el.get(0)))}});acf.registerFieldType(y)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2stZmxhdC9fcHJlbHVkZSIsInNyYy9qcy9saWIvYWNmLXdpemFyZC5qcyIsInNyYy9qcy9saWIvZmllbGQvd2l6YXJkLXByb2NlZWQuanMiLCJzcmMvanMvbGliL2ZpZWxkL3dpemFyZC1zdGVwLmpzIl0sIm5hbWVzIjpbIl8kYWNmV2l6YXJkXzIiLCJXaXphcmQiLCJwYXJlbnQiLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwidGhpcyIsIl9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjIiwiX29ic2VydmVyIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9kZWZpbmVQcm9wZXJ0eSIsImlkeCIsIl9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQiLCJfaW5zdGFuY2VzIiwibGVuZ3RoIiwic3RlcHBlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInByZXBlbmQiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwib2JzZXJ2ZXIiLCJmb3JFYWNoIiwibXV0YXRpb24iLCJmaWVsZEtleSIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsImlzSGlkZGVuIiwibWF0Y2hlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb25jYXQiLCJlbCIsImRpc2FibGVkIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwia2V5Iiwid2l6YXJkIiwiT2JqZWN0IiwidmFsdWVzIiwiZmluZCIsInciLCJwYXJzZUludCIsImNsb3Nlc3QiLCJmaW5kQnlFbGVtZW50IiwiYWN0aW9uIiwiZ290byIsImN1cnJlbnRJbmRleCIsImdldCIsIl90aGlzIiwibmF2SXRlbSIsInRlc3ROYXZJdGVtIiwicXVlcnlTZWxlY3RvciIsImVyciIsImkiLCJzZXQiLCJfdGhpczIiLCJfY2xhc3NQcml2YXRlRmllbGRHZXQiLCJkaXNjb25uZWN0IiwibmF2VHlwZSIsImJ0biIsInR5cGUiLCJpbmNsdWRlcyIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiYXBwZW5kIiwib2JzZXJ2ZSIsImF0dHJpYnV0ZXMiLCJyZW1vdmUiLCJjdXJyZW50TmF2SXRlbSIsIm5hdktleSIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvdG90eXBlIiwiZGVmaW5lUHJvcGVydHkiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm5hdmlnYXRlIiwib2JqIiwiX19lc01vZHVsZSIsIldpemFyZFByb2NlZWQiLCJhY2YiLCJGaWVsZCIsImV4dGVuZCIsImluaXRpYWxpemUiLCIkZWwiLCJoYXNDbGFzcyIsInJlZ2lzdGVyRmllbGRUeXBlIiwiX19vYmpfNCIsIl9hY2ZXaXphcmQiLCJkZWZhdWx0IiwiV2l6YXJkU3RlcCIsImFkZENsYXNzIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxJQUFBQSx1d0NDQU1DLEVBQU0sV0FtRlgsU0FBQUEsRUFBYUMsSUFBQSxTQUFBQyxFQUFBQyxHQUFBLEtBQUFELGFBQUFDLEdBQUEsTUFBQSxJQUFBQyxVQUFBLHFDQUFBLENBQVNDLEtBQUFMLHFKQUFBTSxDQUFBRCxLQUFBRSxFQUFBLENBQUFDLFVBQUEsRUFBQUMsV0FBQSxJQUFBQyxFQUFBTCxLQUFBLGNBQUEsR0FBQUssRUFBQUwsS0FBQSxlQUFBLEdBQUFLLEVBQUFMLEtBQUEsUUFsRGQsSUFtRFAsVUFBTU0sRUFBTUMsRUFBQVosRUFwRlJBLEVBQU1hLEdBb0ZvQkMsT0FFOUJULEtBQUtKLE9BQVNBLEVBQ2RJLEtBQUtVLFFBQVVDLFNBQVNDLGNBQWMsT0FFdENaLEtBQUtKLE9BQU9pQixhQUFhLHdCQUF3QlAsR0FDakROLEtBQUtVLFFBQVFJLFVBQVVDLElBQUksc0JBQzNCZixLQUFLSixPQUFPb0IsUUFBU2hCLEtBQUtVLFdBRTFCVixPQUFJRSxJQUFhLElBQUllLGtCQUFBLFNBQW1CQyxFQUFVQyxHQUNqREQsRUFBVUUsU0FBQSxTQUFTQyxHQUVsQixJQUFNQyxFQUFXRCxFQUFT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V0FFbkMsSUFBTUMsRUFBZ0JDLElBQUlDLE1BQU1DLE9BQU8sQ0FDdENyQixLQUFNLGNBQ05zQixXQUFZLFdBRVBoRixLQUFLaUYsSUFBSUMsU0FBUyxpQkFPeEJMLElBQUlNLGtCQUFrQlAsT0NiYVEsRUFBbkNDLEdBQW1DRCxFQUFuQzFGLElBQW1DMEYsRUFBQVQsV0FBQVMsRUFBQSxDQUFBRSxRQUFBRixHQUU3QkcsRUFBYVYsSUFBSUMsTUFBTUMsT0FBTyxDQUNuQ3JCLEtBQU0sY0FFTnNCLFdBQVksV0FFTmhGLEtBQUtpRixJQUFJQyxTQUFTLGdCQUl2QmxGLEtBQUtpRixJQUFJTyxTQUFTLGNBRWxCeEYsS0FBS2tDLE9BQVNtRCxFQUFBQyxRQUFPRyxRQUFTekYsS0FBS2lGLElBQUlyRixTQUFTaUQsSUFBSSxJQUNwRDdDLEtBQUtrQyxPQUFPbkIsSUFBS2YsS0FBS2lGLElBQUlwQyxJQUFJLFFBTWhDZ0MsSUFBSU0sa0JBQWtCSSxHSHBCdEIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcbiIsIlxuY2xhc3MgV2l6YXJkIHtcblx0LyoqIEB2YXIgQXJyYXkgKi9cblx0c3RhdGljICNpbnN0YW5jZXMgPSBbXVxuXG5cdC8qKlxuXHQgKlx0QHJldHVybiBXaXphcmRcblx0ICovXG5cdHN0YXRpYyBmYWN0b3J5KHBhcmVudCkge1xuXHRcdGxldCB3aXphcmQgPSBPYmplY3QudmFsdWVzKCBXaXphcmQuI2luc3RhbmNlcyApLmZpbmQoIHcgPT4gcGFyZW50ID09PSB3LnBhcmVudCApXG5cdFx0aWYgKCB1bmRlZmluZWQgPT09IHdpemFyZCApIHtcblx0XHRcdHdpemFyZCA9IG5ldyBXaXphcmQoIHBhcmVudCApXG5cdFx0fVxuXHRcdHJldHVybiB3aXphcmRcblx0fVxuXG5cdC8qKlxuXHQgKlx0QHJldHVybiBXaXphcmRcblx0ICovXG5cdHN0YXRpYyBmaW5kQnlFbGVtZW50KGVsKSB7XG5cdFx0Y29uc3QgaWR4ID0gcGFyc2VJbnQoIGVsLmNsb3Nlc3QoJ1tkYXRhLXdpemFyZC1jb250YWluZXJdJykuZ2V0QXR0cmlidXRlKCdkYXRhLXdpemFyZC1jb250YWluZXInKSApXG5cdFx0cmV0dXJuIFdpemFyZC4jaW5zdGFuY2VzW2lkeF1cblx0fVxuXG5cdC8qKiBAdmFyIE11dGF0aW9uT2JzZXJ2ZXIgKi9cblx0I29ic2VydmVyXG5cblx0LyoqIEB2YXIgRE9NTm9kZSAqL1xuXHRwYXJlbnRcblxuXHQvKiogQHZhciBET01Ob2RlICovXG5cdHN0ZXBwZXJcblxuXHQvKiogQHZhciBBcnJheSAqL1xuXHRzdGVwcyA9IFtdXG5cblx0Z2V0IGN1cnJlbnQoKSB7XG5cdFx0bGV0IGN1ciA9IGZhbHNlXG5cdFx0dGhpcy5wYXJlbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNmLWZpZWxkLXdpemFyZC1zdGVwJylcblx0XHRcdC5mb3JFYWNoKCBlbCA9PiBpZHggPSBlbC5tYXRjaGVzKCcuYWN0aXZlJykgPyBlbCA6IGN1ciApXG5cdFx0cmV0dXJuIGN1clxuXHR9XG5cblx0Z2V0IGN1cnJlbnROYXZJdGVtKCkge1xuXHRcdGxldCBuYXZJdGVtID0gZmFsc2Vcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5wYXJlbnRcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2YtZmllbGQtd2l6YXJkLXN0ZXAnKVxuXHRcdFx0XHQuZm9yRWFjaCggZWwgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHRlc3ROYXZJdGVtID0gdGhpcy5zdGVwcGVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpemFyZC10YXJnZXQ9XCIke2VsLmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKX1cIl1gKVxuXHRcdFx0XHRcdGlmICggdGVzdE5hdkl0ZW0gKSB7XG5cdFx0XHRcdFx0XHRuYXZJdGVtID0gdGVzdE5hdkl0ZW1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBlbC5tYXRjaGVzKCcuYWN0aXZlJykgKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyAnJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblxuXHRcdH0gY2F0Y2goZXJyKSB7fVxuXHRcdHJldHVybiBuYXZJdGVtXG5cdH1cblxuXHRnZXQgY3VycmVudEluZGV4KCkge1xuXHRcdGxldCBpZHggPSAtMVxuXHRcdHRoaXMucGFyZW50XG5cdFx0XHQucXVlcnlTZWxlY3RvckFsbCgnLmFjZi1maWVsZC13aXphcmQtc3RlcCcpXG5cdFx0XHQuZm9yRWFjaCggKGVsLGkpID0+IGlkeCA9IGVsLm1hdGNoZXMoJy5hY3RpdmUnKSA/IGkgOiBpZHggKVxuXHRcdHJldHVybiBpZHhcblx0fVxuXG5cdHNldCBjdXJyZW50SW5kZXgoIGlkeCApIHtcblx0XHR0aGlzLnBhcmVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2YtZmllbGQtd2l6YXJkLXN0ZXAnKVxuXHRcdFx0LmZvckVhY2goIChlbCxpKSA9PiB7XG5cdFx0XHRcdGlmICggaWR4ID09PSBpICkge1xuXHRcdFx0XHRcdHRoaXMuZ290byhlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JykpXG5cdFx0XHRcdH1cblx0XHRcdH0gKVxuXHR9XG5cblx0LyoqXG5cdCAqXHRAcGFyYW0gcGFyZW50IERPTU5vZGVcblx0ICovXG5cdGNvbnN0cnVjdG9yKCBwYXJlbnQgKSB7XG5cdFx0Y29uc3QgaWR4ID0gV2l6YXJkLiNpbnN0YW5jZXMubGVuZ3RoXG5cblx0XHR0aGlzLnBhcmVudCA9IHBhcmVudFxuXHRcdHRoaXMuc3RlcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cblx0XHR0aGlzLnBhcmVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2l6YXJkLWNvbnRhaW5lcicsaWR4KVxuXHRcdHRoaXMuc3RlcHBlci5jbGFzc0xpc3QuYWRkKCdhY2Ytd2l6YXJkLXN0ZXBwZXInKVxuXHRcdHRoaXMucGFyZW50LnByZXBlbmQoIHRoaXMuc3RlcHBlciApXG5cblx0XHR0aGlzLiNvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCAobXV0YXRpb25zLG9ic2VydmVyKSA9PiB7XG5cdFx0XHRtdXRhdGlvbnMuZm9yRWFjaCggbXV0YXRpb24gPT4ge1xuXG5cdFx0XHRcdGNvbnN0IGZpZWxkS2V5ID0gbXV0YXRpb24udGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKVxuXHRcdFx0XHRjb25zdCBpc0hpZGRlbiA9IG11dGF0aW9uLnRhcmdldC5tYXRjaGVzKCcuYWNmLWhpZGRlbicpXG5cblx0XHRcdFx0Ly8gZGlyZWN0IHJlZmVyZW5jZXNcblx0XHRcdFx0ZG9jdW1lbnRcblx0XHRcdFx0XHQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtd2l6YXJkLWFjdGlvbj1cImdvdG9cIl1bZGF0YS13aXphcmQtdGFyZ2V0PVwiJHtmaWVsZEtleX1cIl1gKVxuXHRcdFx0XHRcdC5mb3JFYWNoKCBlbCA9PiB7XG5cdFx0XHRcdFx0XHRlbC5kaXNhYmxlZCA9IGlzSGlkZGVuXG5cdFx0XHRcdFx0fSApXG5cblx0XHRcdH0pXG5cdFx0fSlcblxuXHRcdFdpemFyZC4jaW5zdGFuY2VzW2lkeF0gPSB0aGlzXG5cdH1cblxuXHRkZXN0cnVjdG9yKCkge1xuXHRcdHRoaXMuI29ic2VydmVyLmRpc2Nvbm5lY3QoKVxuXHR9XG5cblx0LyoqXG5cdCAqXHRAcGFyYW0gZWwgRE9NTm9kZVxuXHQgKlx0QHJldHVybiBXaXphcmRcblx0ICovXG5cdGFkZChlbCkge1xuXG5cdFx0Y29uc3QgbmF2VHlwZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS13aXphcmQtbmF2JylcblxuXHRcdGlmICggJ25vbmUnID09PSBuYXZUeXBlICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0fVxuXG5cdFx0Ly8gYWRkIG5hdmlnYXRpb24gZWxlbWVudFxuXHRcdGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXHRcdGNvbnN0IGZpZWxkS2V5ID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpXG5cblx0XHRidG4udHlwZSA9ICdidXR0b24nXG5cdFx0YnRuLnNldEF0dHJpYnV0ZSgnZGF0YS13aXphcmQtYWN0aW9uJywnZ290bycpXG5cdFx0YnRuLnNldEF0dHJpYnV0ZSgnZGF0YS13aXphcmQtdGFyZ2V0JywgZmllbGRLZXkgKVxuXHRcdGlmICggbmF2VHlwZS5pbmNsdWRlcygnbmFtZScpICkge1xuXHRcdFx0YnRuLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cImFjZi13aXphcmQtbmF2LWl0ZW0tbmFtZVwiPiR7ZWwucXVlcnlTZWxlY3RvcignLmFjZi1sYWJlbCcpLnRleHRDb250ZW50fTwvc3Bhbj5gXG5cdFx0fVxuXHRcdGJ0bi5jbGFzc0xpc3QuYWRkKCdhY2Ytd2l6YXJkLW5hdi1pdGVtJylcblx0XHRpZiAoIG5hdlR5cGUuaW5jbHVkZXMoJ251bWJlcicpICkge1xuXHRcdFx0YnRuLmNsYXNzTGlzdC5hZGQoJy1udW1iZXJlZCcpXG5cdFx0fVxuXHRcdHRoaXMuc3RlcHBlci5hcHBlbmQoYnRuKVxuXG5cdFx0aWYgKCBlbC5tYXRjaGVzKCcuYWNmLWZpZWxkLXdpemFyZC1zdGVwW2RhdGEtY29uZGl0aW9uc106bm90KFtkYXRhLXdpemFyZC1uYXY9XCJub25lXCJdKScpICkge1xuXHRcdFx0dGhpcy4jb2JzZXJ2ZXIub2JzZXJ2ZSggZWwsIHsgYXR0cmlidXRlczogdHJ1ZSB9IClcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMuY3VycmVudEluZGV4IDwgMCApIHtcblx0XHRcdHRoaXMuZ290byhmaWVsZEtleSlcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpc1xuXHR9XG5cblx0LyoqXG5cdCAqXHRAcGFyYW0gZmllbGRLZXkgU3RyaW5nXG5cdCAqXHRAcmV0dXJuIFdpemFyZFxuXHQgKi9cblx0Z290byhmaWVsZEtleSkge1xuXHRcdHRoaXMucGFyZW50XG5cdFx0XHQucXVlcnlTZWxlY3RvcihgOnNjb3BlID4gW2RhdGEta2V5PVwiJHtmaWVsZEtleX1cIl1gKVxuXHRcdFx0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG5cblx0XHR0aGlzLnBhcmVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoYDpzY29wZSA+IC5hY2YtZmllbGQtd2l6YXJkLXN0ZXA6bm90KFtkYXRhLWtleT1cIiR7ZmllbGRLZXl9XCJdKWApXG5cdFx0XHQuZm9yRWFjaCggZWwgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuXHRcdFx0fSlcblx0XHRjb25zdCBuYXZJdGVtID0gdGhpcy5jdXJyZW50TmF2SXRlbVxuXHRcdGlmICggISBuYXZJdGVtICkge1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXHRcdGNvbnN0IG5hdktleSA9IG5hdkl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXdpemFyZC10YXJnZXQnKVxuXG5cdFx0bmF2SXRlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuXHRcdHRoaXMuc3RlcHBlclxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLXdpemFyZC10YXJnZXRdOm5vdChbZGF0YS13aXphcmQtdGFyZ2V0PVwiJHtuYXZLZXl9XCJdKWApXG5cdFx0XHQuZm9yRWFjaCggZWwgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuXHRcdFx0fSlcblx0XHRyZXR1cm4gdGhpc1xuXHR9XG5cblx0c3RhdGljIG5hdmlnYXRlKGVsKSB7XG5cdFx0Y29uc3Qgd2l6YXJkID0gV2l6YXJkLmZpbmRCeUVsZW1lbnQoZWwpXG5cdFx0Y29uc3QgYWN0aW9uID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXdpemFyZC1hY3Rpb24nKVxuXHRcdGlmICggJ2dvdG8nID09PSBhY3Rpb24gKSB7XG5cdFx0XHR3aXphcmQuZ290byggZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXdpemFyZC10YXJnZXQnKSApXG5cdFx0fSBlbHNlIGlmICggJ2ZvcndhcmQnID09PSBhY3Rpb24gKSB7XG5cdFx0XHR3aXphcmQuY3VycmVudEluZGV4ICs9IHBhcnNlSW50KCBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2l6YXJkLXN0ZXBzJykgKVxuXHRcdH0gZWxzZSBpZiAoICdiYWNrJyA9PT0gYWN0aW9uICkge1xuXHRcdFx0d2l6YXJkLmN1cnJlbnRJbmRleCAtPSBwYXJzZUludCggZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXdpemFyZC1zdGVwcycpIClcblx0XHR9XG5cdH1cbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblxuXHRjb25zdCBidG4gPSBlLnRhcmdldC5jbG9zZXN0KCdbZGF0YS13aXphcmQtYWN0aW9uXScpXG5cdGlmICggYnRuICkge1xuXHRcdFdpemFyZC5uYXZpZ2F0ZShidG4pXG5cdH1cbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gV2l6YXJkXG4vL1xuLy9cbi8vXG4vLyBjb25zdCB3aXphcmRzID0gW11cbi8vXG4vLyBjb25zdCBmaW5kV2l6YXJkQnlGaWVsZCA9IGZpZWxkID0+IHtcbi8vIFx0bGV0IHdpemFyZCA9IHdpemFyZHMuZmluZCggdyA9PiBmaWVsZC4kZWwucGFyZW50KCkuZ2V0KDApID09PSB3LnBhcmVudC5nZXQoMCkgKVxuLy8gXHRpZiAoIHVuZGVmaW5lZCA9PT0gd2l6YXJkICkge1xuLy8gXHRcdHdpemFyZCA9IHtcbi8vIFx0XHRcdHBhcmVudDogZmllbGQuJGVsLnBhcmVudCgpLFxuLy8gXHRcdFx0ZmllbGRzOiBbXSxcbi8vIFx0XHRcdCRzdGVwcGVyOiBmYWxzZSxcbi8vIFx0XHRcdCRuYXZJdGVtOiBmYWxzZVxuLy8gXHRcdH1cbi8vIFx0XHR3aXphcmRzLnB1c2god2l6YXJkKVxuLy8gXHR9XG4vLyBcdHJldHVybiB3aXphcmRcbi8vIH1cbi8vXG4vLyBjb25zdCBmaW5kV2l6YXJkQnlFbGVtZW50ID0gZWwgPT4ge1xuLy8gXHRjb25zdCBwYXJlbnQgPSBlbC5jbG9zZXN0KCdbZGF0YS13aXphcmQtY29udGFpbmVyPVwiMVwiXScpXG4vLyBcdHJldHVybiB3aXphcmRzLmZpbmQoIHcgPT4gcGFyZW50ID09PSB3LnBhcmVudC5nZXQoMCkgKVxuLy8gfVxuLy9cbi8vXG4vLyAvL1xuLy8gLy8gY29uc3Qgd2l6YXJkTWFuYWdlciA9IG5ldyBhY2YuTW9kZWwoe1xuLy8gLy8gXHRhZGRQYWdlOiBmdW5jdGlvbiggZmllbGQgKSB7XG4vLyAvLyBcdFx0Y29uc3Qgd2l6YXJkID0gZmluZFdpemFyZEJ5RmllbGQoIGZpZWxkIClcbi8vIC8vIFx0XHRjb25zdCBpc0luaXRpYWwgPSAhIHdpemFyZC4kc3RlcHBlclxuLy8gLy8gXHRcdGxldCAkc3RlcHBlclxuLy8gLy9cbi8vIC8vIFx0XHRpZiAoIGlzSW5pdGlhbCApIHtcbi8vIC8vIFx0XHRcdHdpemFyZC4kc3RlcHBlciA9ICQoJzxkaXYgY2xhc3M9XCJhY2Ytd2l6YXJkLXN0ZXBwZXJcIiAvPicpXG4vLyAvLyBcdFx0XHR3aXphcmQuJHN0ZXBwZXJcbi8vIC8vIFx0XHRcdFx0Lmluc2VydEJlZm9yZSggZmllbGQuJGVsIClcbi8vIC8vIFx0XHRcdHdpemFyZC5wYXJlbnRcbi8vIC8vIFx0XHRcdFx0LmF0dHIoICdkYXRhLXdpemFyZC1jb250YWluZXInLCAxIClcbi8vIC8vIFx0XHR9XG4vLyAvLyBcdFx0Y29uc3QgaWR4ID0gd2l6YXJkLnBhcmVudC5maW5kKCcuYWNmLXdpemFyZCcpLmxlbmd0aFxuLy8gLy8gXHRcdC8vIGZpZWxkLiRlbC5hdHRyKCdkYXRhLXdpemFyZC1pbmRleCcsaWR4IClcbi8vIC8vIFx0XHR3aXphcmQuJG5hdkl0ZW0gPSB0aGlzLmNyZWF0ZU5hdkl0ZW0oIGZpZWxkLCB3aXphcmQuJHN0ZXBwZXIuZmluZCgnLmFjZi13aXphcmQtbmF2LWl0ZW0nKS5sZW5ndGggKyAxIClcbi8vIC8vXG4vLyAvLyBcdFx0aWYgKCB3aXphcmQuJG5hdkl0ZW0gKSB7XG4vLyAvLyBcdFx0XHR3aXphcmQuJHN0ZXBwZXIuYXBwZW5kKCB3aXphcmQuJG5hdkl0ZW0gKVxuLy8gLy8gXHRcdH1cbi8vIC8vIFx0XHR3aXphcmQuZmllbGRzLnB1c2goIGZpZWxkIClcbi8vIC8vXG4vLyAvLyBcdFx0aWYgKCBpc0luaXRpYWwgKSB7XG4vLyAvLyBcdFx0XHR0aGlzLmdvdG8oIGZpZWxkLmdldCgna2V5JykgKVxuLy8gLy8gXHRcdH1cbi8vIC8vIFx0XHRpZiAoIGZpZWxkLiRlbC5pcygnLmFjZi1maWVsZC13aXphcmQtc3RlcFtkYXRhLWNvbmRpdGlvbnNdOm5vdChbZGF0YS13aXphcmQtbmF2PVwibm9uZVwiXSknKSApIHtcbi8vIC8vIFx0XHRcdGhpZGRlbk9ic2VydmVyLm9ic2VydmUoIGZpZWxkLiRlbC5nZXQoMCksIHsgYXR0cmlidXRlczogdHJ1ZSB9IClcbi8vIC8vIFx0XHR9XG4vLyAvL1xuLy8gLy8gXHRcdHJldHVybiB3aXphcmRcbi8vIC8vIFx0fSxcbi8vIC8vIFx0Y3JlYXRlTmF2SXRlbTogZnVuY3Rpb24oIGZpZWxkLCBudW0gKSB7XG4vLyAvLyBcdFx0Y29uc3QgbmF2VHlwZSA9IGZpZWxkLiRlbC5hdHRyKCdkYXRhLXdpemFyZC1uYXYnKVxuLy8gLy8gXHRcdGNvbnN0IGZpZWxkS2V5ID0gZmllbGQuZ2V0KCdrZXknKVxuLy8gLy8gXHRcdGxldCBuYW1lID0gJydcbi8vIC8vIFx0XHRsZXQgY2xhc3NOYW1lID0gJydcbi8vIC8vIFx0XHRsZXQgZGlzYWJsZWQgPSAnJ1xuLy8gLy8gXHRcdGxldCAkYnRuO1xuLy8gLy8gXHRcdGlmICggJ25vbmUnID09PSBuYXZUeXBlICkge1xuLy8gLy8gXHRcdFx0cmV0dXJuIGZhbHNlXG4vLyAvLyBcdFx0fVxuLy8gLy8gXHRcdGlmICggbmF2VHlwZS5pbmNsdWRlcygnbmFtZScpICkge1xuLy8gLy8gXHRcdFx0bmFtZSA9IGA8c3BhbiBjbGFzcz1cImFjZi13aXphcmQtbmF2LWl0ZW0tbmFtZVwiPiR7ZmllbGQuJGVsLmZpbmQoJy5hY2YtbGFiZWwnKS50ZXh0KCl9PC9zcGFuPmA7XG4vLyAvLyBcdFx0fVxuLy8gLy8gXHRcdGlmICggbmF2VHlwZS5pbmNsdWRlcygnbnVtYmVyJykgKSB7XG4vLyAvLyBcdFx0XHRjbGFzc05hbWUgPSAnLW51bWJlcmVkJztcbi8vIC8vIFx0XHR9XG4vLyAvLyBcdFx0JGJ0biA9ICQoIGA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImFjZi13aXphcmQtbmF2LWl0ZW0gJHtjbGFzc05hbWV9XCIgZGF0YS13aXphcmQtYWN0aW9uPVwiZ290b1wiIGRhdGEtd2l6YXJkLXRhcmdldD1cIiR7ZmllbGRLZXl9XCI+JHtuYW1lfTwvYnV0dG9uPmApXG4vLyAvLyBcdFx0aWYgKCBmaWVsZC4kZWwuaXMoJy5hY2YtaGlkZGVuJykgKSB7XG4vLyAvLyBcdFx0XHQkYnRuLnByb3AoJ2Rpc2FibGVkJyx0cnVlKVxuLy8gLy8gXHRcdH1cbi8vIC8vIFx0XHRyZXR1cm4gJGJ0blxuLy8gLy8gXHR9LFxuLy8gLy8gXHRnb3RvOiBmdW5jdGlvbiggZmllbGRLZXkgKSB7XG4vLyAvLyBcdFx0Ly8gJChgW2RhdGEta2V5PVwiJHtmaWVsZEtleX1cIl1gKVxuLy8gLy8gXHRcdC8vIFx0LmFkZENsYXNzKCdhY3RpdmUnKVxuLy8gLy8gXHRcdC8vIFx0LnBhcmVudCgpXG4vLyAvLyBcdFx0Ly8gXHQuZmluZChgLmFjZi1maWVsZC13aXphcmQtc3RlcDpub3QoW2RhdGEta2V5PVwiJHtmaWVsZEtleX1cIl0pYClcbi8vIC8vIFx0XHQvLyBcdC5yZW1vdmVDbGFzcygnYWN0aXZlJylcbi8vIC8vIFx0XHQvLyAkKGBbZGF0YS13aXphcmQtdGFyZ2V0PVwiJHtmaWVsZEtleX1cIl1gKVxuLy8gLy8gXHRcdC8vIFx0LmFkZENsYXNzKCdhY3RpdmUnKVxuLy8gLy8gXHRcdC8vIFx0LnBhcmVudCgpXG4vLyAvLyBcdFx0Ly8gXHQuZmluZChgW2RhdGEtd2l6YXJkLXRhcmdldF06bm90KFtkYXRhLXdpemFyZC10YXJnZXQ9XCIke2ZpZWxkS2V5fVwiXSlgKVxuLy8gLy8gXHRcdC8vIFx0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuLy8gLy8gXHR9XG4vLyAvLyB9KVxuLy9cbi8vICQoZG9jdW1lbnQpXG4vLyBcdC5vbignY2xpY2snLCdidXR0b25bZGF0YS13aXphcmQtYWN0aW9uPVwiZ290b1wiXScsIGUgPT4ge1xuLy8gXHRcdGUucHJldmVudERlZmF1bHQoKVxuLy8gXHRcdHdpemFyZE1hbmFnZXIuZ290byggJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtd2l6YXJkLXRhcmdldCcpIClcbi8vIFx0fSlcbi8vIFx0Lm9uKCdjbGljaycsJ2J1dHRvbltkYXRhLXdpemFyZC1hY3Rpb249XCJmb3J3YXJkXCJdJywgZSA9PiB7XG4vLyBcdFx0Y29uc3Qgc3RlcHMgPSBwYXJzZUludCggJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtd2l6YXJkLXN0ZXBzJykgKVxuLy8gXHRcdGUucHJldmVudERlZmF1bHQoKVxuLy8gXHRcdGZpbmRXaXphcmRCeUVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5maWVsZHMuaW5kZXhPZigpXG4vL1xuLy8gXHR9KVxuLy8gXHQub24oJ2NsaWNrJywnYnV0dG9uW2RhdGEtd2l6YXJkLWFjdGlvbj1cImJhY2tcIl0nLCBlID0+IHtcbi8vIFx0XHRjb25zdCBzdGVwcyA9IHBhcnNlSW50KCAkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS13aXphcmQtc3RlcHMnKSApICogLTFcbi8vIFx0XHR3aXphcmRNYW5hZ2VyLnN0ZXBCeSggJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtd2l6YXJkLXN0ZXBzJykgKiAtMSApXG4vLyBcdH0pXG4vL1xuLy9cbi8vXG4vLyAvLyBtb2R1bGUuZXhwb3J0cyA9IHdpemFyZE1hbmFnZXI7XG4iLCJpbXBvcnQgV2l6YXJkIGZyb20gJ2FjZi13aXphcmQuanMnO1xuXG5jb25zdCBXaXphcmRQcm9jZWVkID0gYWNmLkZpZWxkLmV4dGVuZCh7XG5cdHR5cGU6ICd3aXphcmRfc3RlcCcsXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYgKHRoaXMuJGVsLmhhc0NsYXNzKCdhY2Ytd2l6YXJkJykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gY29sbGVjdCwgaW5pdCwgLi4uXG5cdH1cbn0pXG5cbmFjZi5yZWdpc3RlckZpZWxkVHlwZShXaXphcmRQcm9jZWVkKTtcbiIsImltcG9ydCBXaXphcmQgZnJvbSAnYWNmLXdpemFyZC5qcyc7XG5cbmNvbnN0IFdpemFyZFN0ZXAgPSBhY2YuRmllbGQuZXh0ZW5kKHtcblx0dHlwZTogJ3dpemFyZF9zdGVwJyxcblxuXHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblxuXHRcdGlmICggdGhpcy4kZWwuaGFzQ2xhc3MoJ2FjZi13aXphcmQnKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuJGVsLmFkZENsYXNzKCdhY2Ytd2l6YXJkJylcblxuXHRcdHRoaXMud2l6YXJkID0gV2l6YXJkLmZhY3RvcnkoIHRoaXMuJGVsLnBhcmVudCgpLmdldCgwKSApXG5cdFx0dGhpcy53aXphcmQuYWRkKCB0aGlzLiRlbC5nZXQoMCkgKVxuXG5cdFx0Ly8gY29sbGVjdCwgaW5pdCwgLi4uXG5cdH1cbn0pXG5cbmFjZi5yZWdpc3RlckZpZWxkVHlwZShXaXphcmRTdGVwKTtcbiJdfQ==