!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,l,o=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(f){u=!0,r=f}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function a(t,n){for(var a=0;a<n.length;a++){var r=n[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(i)?i:String(i)),r)}var i}function r(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to get private static field before its declaration")}(n),function(e,t){return t.get?t.get.call(e):t.value}(e,n)}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=t,this.table=this.field.$el.get(0).querySelector(".acf-wizard-prefill-table")}var n,i,o;return n=e,o=[{key:"factory",value:function(t){return r(e,e,l)[t.getKey()]||(r(e,e,l)[t.getKey()]=new e(t)),r(e,e,l)[t.getKey()]}}],(i=[{key:"prefillRows",get:function(){return this.field.$el.get(0).querySelectorAll("tr.prefill:not(.acf-wizard-prefill-template)")}},{key:"update",value:function(){var e=this;this.prefillRows.forEach((function(t){return e.setupRow(t)})),this.maybeAppendRow(),this.field.save(),this.disableDuplicates()}},{key:"maybeAppendRow",value:function(){var e,t,n=this.prefillRows,a=!1;n.length&&""===this.getRowFieldKey(n[n.length-1])||(e=this.table.querySelector(".acf-wizard-prefill-template"),t=acf.uniqid(),a=e.cloneNode(!0),this.table.querySelector("tbody").insertBefore(a,e),a.setAttribute("data-index",t),a.querySelector("td.field select").setAttribute("name","".concat(this.field.getInputName(),"[prefill_values][").concat(t,"][field_key]")),a.classList.remove("acf-wizard-prefill-template","acf-hidden"))}},{key:"disableDuplicates",value:function(){var e=this;Array.from(this.prefillRows).map((function(t){return e.getRowFieldKey(t)})).filter((function(e){return void 0!==e&&0===e.indexOf("field_")})).map((function(t){e.table.querySelectorAll('tr:not(.acf-hidden) td.field option[value="'.concat(t,'"]')).forEach((function(e){e.selected||(e.disabled=!0)}))}))}},{key:"setupRow",value:function(e){var t,n,a=this.getRowFieldKey(e),r="";void 0!==a?(t=acf.getFieldObjects({key:a})[0]).getType()!==e.getAttribute("data-type")&&(r=(n=e.querySelector('td.value [type="hidden"]:not([name$="[]"])'))?n.value:Array.from(e.querySelectorAll('td.value [type="hidden"][name$="[]"]')).map((function(e){return e.value})),e.querySelector("td.value").innerHTML=this.getPrefillInput(t,e.getAttribute("data-index"),r),e.setAttribute("data-type",t.getType())):e.remove()}},{key:"getPrefillInput",value:function(e,n){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=function(){return e.$el.find('[data-name="choices"] textarea').val().split("\n").map((function(e){var n=t(e.split(/ : ([\s\S]*)/),2),a=n[0],r=n[1];return!!a.trim()&&{id:a.trim(),text:r?r.trim():a}})).filter((function(e){return!1!==e}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return["<select ".concat(e?"multiple":"",' name="').concat(a.field.getInputName(),"[prefill_values][").concat(n,"][val]").concat(e?"[]":"",'" value="').concat(r,'">'),i().map((function(t){return'<option value="'.concat(t.id,'" ').concat(!e&&t.id===r||e&&r.includes(t.id)?"selected":"",">").concat(t.text,"</option>")})),"</select>"].join("")},o=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=e.$el.find('[data-name="min"] input'),l=e.$el.find('[data-name="max"] input'),o=e.$el.find('[data-name="step"] input'),c=e.$el.find('[data-name="min"] input').val(),u=e.$el.find('[data-name="max"] input').val(),f=e.$el.find('[data-name="step"] input').val();return t&&!c&&(c=i.attr("placeholder")),t&&!u&&(u=l.attr("placeholder")),t&&!f&&(f=o.attr("placeholder")),'<input type="number" name="'.concat(a.field.getInputName(),"[prefill_values][").concat(n,'][val]" value="').concat(r,'" min="').concat(c,'" max="').concat(u,'" step="').concat(f,'" />')},c={text:function(){return'<input type="text" name="'.concat(a.field.getInputName(),"[prefill_values][").concat(n,'][val]" value="').concat(r,'" />')},number:function(){return'<input type="number" name="'.concat(a.field.getInputName(),"[prefill_values][").concat(n,'][val]" value="').concat(r,'" />')},range:function(){return o(!0)},email:function(){return'<input type="email" name="'.concat(a.field.getInputName(),"[prefill_values][").concat(n,'][val]" value="').concat(r,'" />')},url:function(){return'<input type="text" name="'.concat(a.field.getInputName(),"[prefill_values][").concat(n,'][val]" value="').concat(r,'" />')},select:function(){return l(e.$el.find('[data-name="multiple"] [type="checkbox"]').is(":checked"))},checkbox:function(){return l(!0)},radio:function(){return l(!1)},button_group:function(){return l(!1)},true_false:function(){return'<input type="hidden" value="0" name="'.concat(a.field.getInputName(),"[prefill_values][").concat(n,'][val]" /><input type="checkbox" value="1" name="').concat(a.field.getInputName(),"[prefill_values][").concat(n,'][val]" />')}};return c[e.getType()]()}},{key:"getRowFieldKey",value:function(e){return Array.from(e.querySelector(".field select").selectedOptions).map((function(e){return e.value})).find((function(e){return-1!==e.indexOf("field_")}))}}])&&a(n.prototype,i),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(),l={writable:!0,value:{}},o=i;(function(e){(function(){var t=a("undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null),n=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var r=acf_wizard_field_groups.i18n,i=function(){acf.getFieldObjects({type:"wizard_proceed"}).forEach((function(e){acf.renderSelect(e.$el.find('[data-name="wizard_target"] select'),acf.getFieldObjects({type:"wizard_step"}).map((function(e){return{id:e.getKey(),text:e.getLabel()}})));var a,i=(a=["text","number","range","email","url","select","checkbox","radio","button_group","true_false"],[{id:"",text:r.noneChoice}].concat(acf.getFieldObjects().filter((function(e){return a.includes(e.getType())})).map((function(e){return{id:e.getKey(),text:e.getLabel()}}))));e.$el.find("tr.prefill td.field select").each((function(a,r){acf.renderSelect((0,t.default)(r),i),n.default.factory(e).update()}))}))},l=function(){acf.getFieldObjects({type:"wizard_proceed"}).forEach((function(e){n.default.factory(e).update()}))};acf.addAction("render_field_settings/type=wizard_proceed",(function(e){var t=acf.getFieldObjects({key:e.attr("data-key")})[0];n.default.factory(t).update()})),acf.addAction("ready_fields",i),acf.addAction("removed_field_object",i),acf.addAction("append_field_object",i),acf.addAction("new_field_object",i),acf.addAction("change_field_object_label",i),acf.addAction("removed_field_object",l),acf.addAction("change_field_object_choices",l),acf.addAction("change_field_type",l),acf.addAction("new_field_object",(function(e){"wizard_proceed"===e.getType()&&e.$el.on("change",".field select",(function(t){n.default.factory(e).update()})).on("change",'td.value *,[data-name="wizard_target"] select',(function(t){e.save()}))})),(0,t.default)(document).on("click",".remove-prefill-value",(function(e){return e.target.closest("tr").remove()}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();